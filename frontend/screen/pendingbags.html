<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Screening Dashboard</title>
    <link rel="stylesheet" href="./style.css">
	
	 <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
	 <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.js"></script> 
	 <script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script> 
	<style>
		
		
		/* Style The Dropdown Button */
		.dropbtn {
		  background-color:  #fff;
		  border: 1px solid rgb(190, 14, 14);
		  width: 90px;
		  height:15px;
		  border-radius: 8px;
		  color: rgb(190, 14, 14);
		  padding: 10px;
		  font-size: 13px;
		  cursor: pointer;
		}

		/* The container <div> - needed to position the dropdown content */
		.dropdown {
		  position: relative;
		  display: inline-block;
		}

		/* Dropdown Content (Hidden by Default) */
		.dropdown-content {
		  display: none;
		  position: absolute;
		  background-color: #f9f9f9;
		  border-radius: 8px;
		  border: 1px solid rgb(190, 14, 14);
		  min-width: 160px;
		  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
		  z-index: 1;
		}

		/* Links inside the dropdown */
		.dropdown-content a {
		  color: rgb(190, 14, 14);
		  padding: 12px 16px;
		  text-decoration: none;
		  display: block;
		}

		/* Change color of dropdown links on hover */
		.dropdown-content a:hover {background-color: #f1f1f1}

		/* Show the dropdown menu on hover */
		.dropdown:hover .dropdown-content {
		  display: block;
		}

		/* Change the background color of the dropdown button when the dropdown content is shown */
		.dropdown:hover .dropbtn {
		  background-color: #f9f9f9;
		}
	</style>
  </head>
  <body>
    <header>
      <nav class="nav">
        <ul class="nav__list">
 	 	 <li class="nav__item"><a href="index.html" class="nav__link">Dashboard</a> </li>
          <li class="nav__item"><a href="pendingbags.html" class="nav__link"> View Pending Requests</a> </li>
          <li class="nav__item"><a href="viewbags.html" class="nav__link">View Screened Requests</a></li>
          <li class="nav__item"><a href="#" class="nav__link" id="users">Add Users</a></li>
          <li class="nav__item"><a href="#" onclick="logout()" class="nav__link">Log out</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <section class="top">
        <div class="top-section">
          <p>
            Hi,
            <span class="name" id="name">
              John Doe;
            </span>
            Welcome to SmartBag
          </p>
          <p>We are fighting counterfeit and saving lives!</p>
          <p>Powered by BlockChain</p>
        </div>
        <a href="#" class="edit" onclick="openEditProfile()">Edit profile</a>
      </section>

      <section class="bottom">
 		<table id="MyTable" class="display" cellspacing="0" width="98%" style="margin-left: 20px; margin-right: 30px;">
 		  <thead >
 		    <tr>
 			  <th class="th-sm"></th>
 		      <th class="th-sm">Donor Id</th>
 		      <th class="th-sm">Date of Donation</th>
 		      <th class="th-sm">Donor ID</th>
 		      <th class="th-sm">Status</th>
 			  <th class="th-sm"></th>
			  
 		    </tr>
 		  </thead>
 		  <tbody id='bagCon'>
		   
		    
 		  </tbody>
 		 
 		</table>
      </section>

      <section class="section-one">
        <div class="container-form">
            <h1>Add New User</h1>
          <p>
            Noted that you need at least A Supervisor Privileges to add a user
          </p>
          <form>
              <div class="form-input">
                  <label for="fname">First Name: </label>

                  <input type="text" placeholder="first name" id ="fname">
              </div>

              <div class="form-input">
                  <label for="lname">Last Name: </label>

                  <input type="text" placeholder="last name" id ="lname">
              </div>

              <div class="form-input">
                  <label for="number">Phone Number: </label>

                  <input type="text" placeholder="+234801234567" id ="phone">
              </div>

              <div class="form-input">
                  <label for="email">Email: </label>

                  <input type="email" placeholder="demo@email.com" id ="email">
              </div>

              <div class="form-input">
                  <label for="privilege">Privilege</label>
                  <select name="privilege" id="privilege" class="select-box" >
                <option selected>--Select a Privilege--</option>
                <option value="data_entry">Data Entry Officer</option>
                <option value="Supervisor">Supervisor</option>
              </select>
              </div>

              <div class="btn">
                  <input type="button" value="Submit Request" class="btn-sub" onclick="addUser()" >
              </div>
          </form>
        </div>
    </section>
	
      <section class="section-two">
        <div class="container-form">
            <h1>Reject A Bag</h1>
          <p>
            Noted that you this action can not be reversed
          </p>
          <form>
              <div class="form-input">
                  <label for="fname">Bag ID: </label>

                  <input type="text" placeholder="rejectID" id ="rejectID" disabled>
              </div>
              <div class="form-input">
                  <label for="reason">Reason: </label>

                 <textarea id="rejectReason" rows="4" cols="33"></textarea>
              </div>

              <div class="btn">
                  <input type="button" value="Submit Request" class="btn-sub" onclick="rejectBag()" >
              </div>
          </form>
        </div>
    </section>
	
      <section class="section-three">
        <div class="container-form">
            <h1>Destroy A Bag</h1>
          <p>
             Noted that you this action can not be reversed
          </p>
          <form>
              <div class="form-input">
                  <label for="fname">Bag ID: </label>

                  <input type="text"  id ="destroytID" disabled>
              </div>
              <div class="form-input">
                  <label for="reason">Reason: </label>

                 <textarea id="destroyReason" rows="4" cols="33"></textarea>
              </div>
              <div class="form-input">
                  <label for="reason">Proof: </label>
				  <input type="file" id="proof">
              </div>
              <div class="btn">
                  <input type="button" value="Submit Request" class="btn-sub" onclick="DestroyBag()" >
              </div>
          </form>
        </div>
    </section>
	
      <section class="section-four">
        <div class="container-form">
            <h1>Enter The Test Result</h1>
          <p>
            Noted that you need at least A Supervisor Privileges to add a user
          </p>
          <form>
              <div class="form-input">
                  <label for="fname">Bag ID: </label>
                  <input type="text"  id ="TestID" disabled>
              </div>
              <div class="form-input">
                  <label for="fname">Bloodtype: </label>
	               <select name="Bloodtype" id="Bloodtype" class="select-box" >
	                <option selected>Select A BloodType</option>
	                <option value="O">O</option>
	                <option value="A">A</option>
					<option value="B">B</option>
					<option value="AB">AB</option>
	              </select>
              </div>
              <div class="form-input">
                  <label for="fname">Rhesus: </label>
	               <select name="Rhesus" id="Rhesus" class="select-box" >
	                <option selected>Select A Rhesus</option>
	                <option value="-ve">Negative</option>
	                <option value="+ve">Positive</option>
	              </select>
              </div>
              <div class="form-input">
                  <label for="fname">HBV:</label>
	               <select name="HBV" id="HBV" class="select-box" >
	                <option selected>Select A Result</option>
	                <option value="0">Negative</option>
	                <option value="1">Positive</option>
	              </select>
              </div>
              <div class="form-input">
                  <label for="fname">HCV: </label>
  	               <select name="HCV" id="HCV" class="select-box" >
  	                <option selected>Select A Result</option>
  	                <option value="0">Negative</option>
  	                <option value="1">Positive</option>
  	              </select>
              </div>
              <div class="form-input">
                  <label for="fname">HIV: </label>
	               <select name="HIV" id="HIV" class="select-box" >
	                <option selected>Select A Result</option>
	                <option value="0">Negative</option>
	                <option value="1">Positive</option>
	              </select>
              </div>
              <div class="form-input">
                  <label for="fname">PCV: </label>
				  <input type="text" name="PCV" id="PCV" max="70" >
	             
              </div>
              <div class="form-input">
                  <label for="fname">Malaria: </label>
	               <select name="Malaria" id="Malaria" class="select-box" >
	                <option selected>--Select A Result--</option>
	                <option value="0">Negative</option>
	                <option value="1">Positive</option>
	              </select>
              </div>
              <div class="form-input">
                  <label for="fname">Syphilis: </label>
	               <select name="Syphilis" id="Syphilis" class="select-box" >
	                <option selected>--Select A Result--</option>
	                <option value="0">Negative</option>
	                <option value="1">Positive</option>
	              </select>
              </div>
              

              <div class="btn">
                  <input type="button" value="Submit Request" class="btn-sub" onclick="addResult()" >
              </div>
          </form>
        </div>
    </section>
	
	
	<!-- //edit profile        -->
	<section class="edit-profile-info" style="display: none;">
	       <div class="container-form">
	           <h1>Edit Your Profile</h1>
 
	         <form>
	             <div class="form-input">
	                 <label for="fname">First Name: </label>

	                 <input type="text" placeholder="first name" id="editfname">
	             </div>

	             <div class="form-input">
	                 <label for="lname">Last Name: </label>

	                 <input type="text" placeholder="last name" id="editlname">
	             </div>

	             <div class="form-input">
	                 <label for="number">Phone Number: </label>

	                 <input type="text" placeholder="+234801234567" id="editphone">
	             </div>

           

	             <div class="btn">
	                 <input type="button" value="Submit Request" class="btn-sub" onclick="editUser()" >
	             </div>
	         </form>
	       </div>
	   </section>
	
    </main>
    
	<script src="../js/screendashboard.js"></script>
	<script>
		const urlx ='../../v1/dashboard/screener/pending/'+user.organizationsid;
	  	var t = "";
		fetch(urlx)
	    .then(response => response.json())
	    .then(function(data) {
			if(data == 'You have no bags at the moment'){
				document.getElementById("bagCon").innerHTML += '';
			}else{
			
			 for (var i = 0; i < data.length; i++) {


				var tr = "<tr>";
				tr += "<td><input type='checkbox'></td>";
				tr += "<td>"+data[i].Bag_id+"</td>";
				tr += "<td>"+data[i].Donated_date+"</td>";
				tr += "<td>"+data[i].Donor_id+"</td>";
				tr += "<td>"+data[i].Status+"</td>";
				tr += "<td><div class='dropdown'><button class='dropbtn'>More</button><div class='dropdown-content'><a href='#' onclick='viewReject("+data[i].Bag_id+");' >Reject</a><a href='#' onclick='viewDestroy("+data[i].Bag_id+");'>Destroy</a><a href='#' onclick='viewResult("+data[i].Bag_id+");'>Enter Result</a></div></div></td>";
				tr += "</tr>";
				t += tr;
			 }
			document.getElementById("bagCon").innerHTML += t;
		}
	  });

	</script>
		
	<script>  
		$(document).ready( function () {
	      $('#MyTable').DataTable();
	  		} );
	 </script>
	<script src="../js/logout.js"></script>	
	<script src="./app.js"></script>
  </body>
</html>
