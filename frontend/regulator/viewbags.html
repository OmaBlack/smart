<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Screening Dashboard</title>
    <link rel="stylesheet" href="./style.css">
	
	 <link rel="stylesheet" href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">
	 <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.js"></script> 
	 <script type="text/javascript" src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script> 
	<style>
		
		
		/* Style The Dropdown Button */
		.dropbtn {
		  background-color:  #fff;
		  border: 1px solid rgb(190, 14, 14);
		  width: 90px;
		  height:15px;
		  border-radius: 8px;
		  color: rgb(190, 14, 14);
		  padding: 10px;
		  font-size: 13px;
		  cursor: pointer;
		}

		/* The container <div> - needed to position the dropdown content */
		.dropdown {
		  position: relative;
		  display: inline-block;
		}

		/* Dropdown Content (Hidden by Default) */
		.dropdown-content {
		  display: none;
		  position: absolute;
		  background-color: #f9f9f9;
		  border-radius: 8px;
		  border: 1px solid rgb(190, 14, 14);
		  min-width: 160px;
		  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
		  z-index: 1;
		}

		/* Links inside the dropdown */
		.dropdown-content a {
		  color: rgb(190, 14, 14);
		  padding: 12px 16px;
		  text-decoration: none;
		  display: block;
		}

		/* Change color of dropdown links on hover */
		.dropdown-content a:hover {background-color: #f1f1f1}

		/* Show the dropdown menu on hover */
		.dropdown:hover .dropdown-content {
		  display: block;
		}

		/* Change the background color of the dropdown button when the dropdown content is shown */
		.dropdown:hover .dropbtn {
		  background-color: #f9f9f9;
		}
	</style>
  </head>
  <body>
    <header>
      <nav class="nav">
        <ul class="nav__list">
 	 	  <li class="nav__item"><a href="index.html" class="nav__link">Dashboard</a> </li>
          <li class="nav__item"><a href="pendingbags.html" class="nav__link">View Pending</a> </li>
          <li class="nav__item"><a href="viewbags.html" class="nav__link">View Screened</a></li>
          <li class="nav__item"><a href="#" class="nav__link" id="users">Add Users</a></li>
          <li class="nav__item"><a href="#" onclick="logout()" class="nav__link">Log out</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <section class="top">
        <div class="top-section">
          <p>
            Hi,
            <span class="name" id="name">
              John Doe;
            </span>
            Welcome to SmartBag
          </p>
          <p>We are fighting counterfeit and saving lives!</p>
          <p>Powered by BlockChain</p>
        </div>
        <a href="#" class="edit" onclick="openEditProfile()">Edit profile</a>
      </section>

      <section class="bottom">
 		<table id="MyTable" class="display" cellspacing="0" width="98%" style="margin-left: 20px; margin-right: 30px;">
			<caption>Bags </caption>
 		  <thead >
 		    <tr>
 			  <th class="th-sm" scope="col"></th>
 		      <th class="th-sm" scope="col">Bag Id</th>
 		      <th class="th-sm" scope="col">HBV</th>
 		      <th class="th-sm" scope="col">HCV</th>
 		      <th class="th-sm" scope="col">HIV</th>
 		      <th class="th-sm" scope="col">Syphilis</th>
 		      <th class="th-sm" scope="col">Malaria</th>
 			  <th class="th-sm" scope="col">PCV</th>
 		      <th class="th-sm" scope="col">Blood Type</th>
 		      <th class="th-sm" scope="col">Rhesus</th>
 		      <th class="th-sm" scope="col">Test Date</th>
 			  <th class="th-sm" scope="col"></th>
			  
 		    </tr>
 		  </thead>
 		  <tbody id='bagCon'>
		   
		    
 		  </tbody>
 		 
 		</table>
      </section>

      <section class="section-one">
        <div class="container-form">
            <h1>Add New User</h1>
          <p>
            Noted that you need at least A Supervisor Privileges to add a user
          </p>
          <form>
              <div class="form-input">
                  <label for="fname">First Name: </label>

                  <input type="text" placeholder="first name" id ="fname">
              </div>

              <div class="form-input">
                  <label for="lname">Last Name: </label>

                  <input type="text" placeholder="last name" id ="lname">
              </div>

              <div class="form-input">
                  <label for="number">Phone Number: </label>

                  <input type="text" placeholder="+234801234567" id ="phone">
              </div>

              <div class="form-input">
                  <label for="email">Email: </label>

                  <input type="email" placeholder="demo@email.com" id ="email">
              </div>

              <div class="form-input">
                  <label for="privilege">Privilege</label>
                  <select name="privilege" id="privilege" class="select-box" >
                <option selected>Select a Privilege</option>
                <option value="data_entry">Data Entry Officer</option>
                <option value="Supervisor">Supervisor</option>
              </select>
              </div>

              <div class="btn">
                  <input type="button" value="Submit Request" class="btn-sub" onclick="addUser()" >
              </div>
          </form>
        </div>
    </section>
	
      <section class="section-three">
        <div class="container-form">
            <h1>Destroy A Bag</h1>
          <p>
             Noted that you this action can not be reversed
          </p>
          <form>
              <div class="form-input">
                  <label for="fname">Bag ID: </label>

                  <input type="text"  id ="destroytID" disabled>
              </div>
              <div class="form-input">
                  <label for="reason">Reason: </label>

                 <textarea id="destroyReason" rows="4" cols="33"></textarea>
              </div>
              <div class="form-input">
                  <label for="reason">Proof: </label>
				  <input type="file" id="proof">
              </div>
              <div class="btn">
                  <input type="button" value="Submit Request" class="btn-sub" onclick="DestroyBag()" >
              </div>
          </form>
        </div>
    </section>
	
	 <section class="section-view-bag">
         <div class="container-view">
             <h1>More Information</h1>
			 <p id="details" ></p>
				 
			 
          
		 </div>
	 </section>
	 
	 <!-- //edit profile        -->
	 <section class="edit-profile-info" style="display: none;">
	        <div class="container-form">
	            <h1>Edit Your Profile</h1>
 
	          <form>
	              <div class="form-input">
	                  <label for="fname">First Name: </label>

	                  <input type="text" placeholder="first name" id="editfname">
	              </div>

	              <div class="form-input">
	                  <label for="lname">Last Name: </label>

	                  <input type="text" placeholder="last name" id="editlname">
	              </div>

	              <div class="form-input">
	                  <label for="number">Phone Number: </label>

	                  <input type="text" placeholder="+234801234567" id="editphone">
	              </div>

           

	              <div class="btn">
	                  <input type="button" value="Submit Request" class="btn-sub" onclick="editUser()" >
	              </div>
	          </form>
	        </div>
	    </section>
	 
	
    </main>
    <script src="./app.js"></script>
	<script src="../js/regulatordashboard.js"></script>
	<script>
		const urlx ='../../v1/dashboard/screener/screened/'+user.organizationsid;
	  	var t = "";
		fetch(urlx)
	    .then(response => response.json())
	    .then(function(data) {
			
			if(data == 'You have no bags at the moment'){
				document.getElementById("bagCon").innerHTML += '';
			}else{
				
			 for (var i = 0; i < data.length; i++) {
 			  	var hbv = valuer(data[i].HBV);
 				var hcv = valuer(data[i].HCV);
 				var hiv = valuer(data[i].HIV);
 				var Syphilis = valuer(data[i].Syphilis);
 				var Malaria = valuer(data[i].Malaria);
 				var Rhesus = rhesus(data[i].Rhesus);
				
				var tr = "<tr>";
				tr += "<td><input type='checkbox'></td>";
				tr += "<td>"+data[i].Bag_id+"</td>";
				tr += "<td>"+hbv+"</td>";
				tr += "<td>"+hcv+"</td>";
				tr += "<td>"+hiv+"</td>";
				tr += "<td>"+Syphilis+"</td>";
				tr += "<td>"+Malaria+"</td>";
				tr += "<td>"+data[i].PVC+"</td>";
				tr += "<td>"+data[i].BloodType+"</td>";
				tr += "<td>"+Rhesus+"</td>";
				tr += "<td>"+data[i].Test_date+"</td>";
				tr += "<td><div class='dropdown'><button class='dropbtn'>More</button><div class='dropdown-content'><a href='#' onclick='viewDestroy("+data[i].Bag_id+");'>Destroy</a><a href='#'onclick='viewBag("+data[i].Bag_id+");'>View Details</a></div></div></td>";
				tr += "</tr>";
				t += tr;
			 }
			document.getElementById("bagCon").innerHTML += t;}
	  });
	
		
		$(document).ready(function() {  
		    $('#MyTable').DataTable( {  
		        initComplete: function () {  
		            this.api().columns().every( function () {  
		                var column = this;  
		                var select = $('<select><option value=""></option></select>')  
		                    .appendTo( $(column.footer()).empty() )  
		                    .on( 'change', function () {  
		                        var val = $.fn.dataTable.util.escapeRegex(  
		                            $(this).val()  
		                        );  
		                //to select and search from grid  
		                        column  
		                            .search( val ? '^'+val+'$' : '', true, false )  
		                            .draw();  
		                    } );  
   
		                column.data().unique().sort().each( function ( d, j ) {  
		                    select.append( '<option value="'+d+'">'+d+'</option>' )  
		                } );  
		            } );  
		        }  
		    } );  
		} );  
		
	</script>
		
	
	<script src="../js/logout.js"></script>	
  </body>
</html>
